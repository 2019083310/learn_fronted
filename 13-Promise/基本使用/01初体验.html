<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div>
        <h1>Promise初体验</h1>
        <button id="btn">点击抽奖</button>
    </div>
    <!-- <script>
        let btn=document.getElementById('btn');
        function rand(){
            return Math.round(Math.random()*(100-1)+1);
        }
        btn.onclick=function(){
            setTimeout(()=>{
                let num=rand();
                if(num<30){
                    alert('恭喜你，中奖了')
                }else{
                    alert('再接再厉')
                }
            },2000)
        }
    </script> -->
    <!-- Promise形式 -->
    <script>
        let btn = document.getElementById('btn');

        function rand() {
            return Math.round(Math.random() * (100 - 1) + 1);
        }
        btn.onclick = function () {
            let num = rand();
            let p = new Promise((resolve, reject) => {
                setTimeout(() => {
                    if (num < 30) {
                        resolve(num);
                    } else {
                        reject(num);
                    }
                }, 2000);
            });
            p.then((value) => {
                alert('恭喜你，中奖了'+value)
            }, (reason) => {
                alert('再接再厉'+reason)
            });
        }
    </script>
</body>

</html>